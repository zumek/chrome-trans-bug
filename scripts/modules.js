window.APP_NAME="ntmkApp",angular.module(APP_NAME,["ngRoute","ngAnimate","navigationModule","ScormApi","ngSanitize"]).config(["$routeProvider","screenData",function(e,t){e.when("/:id",{controller:"PageCtrl",templateUrl:function(e){return"/page/"+e.id}}).otherwise({redirectTo:t.settings.startId})}]).run(["navi","Scorm","$rootScope","$location","$timeout",function(e,t,n,a,r){var o;if(n.safeApply=function(){n.$$phase||n.$apply()},t.start(),t.isAvailable()){var i=t.getLessonData();i?e.init(angular.fromJson(unescape(i))):e.init(),o=t.getLessonLocation()}else e.init();o&&a.url(o),r(function(){$(".loading-overlay").fadeOut(1500)},500)}]).animation(".ng-hide",function(){return{beforeAddClass:function(e,t,n){"ng-hide"!==t||e.hasClass("no-anim")?n():e.stop().slideUp({always:function(){n()}})},removeClass:function(e,t,n){"ng-hide"!==t||e.hasClass("no-anim")?n():e.stop().hide().slideDown({always:function(){n()}})}}}),angular.module(APP_NAME).controller("MainCtrl",["$scope","$window","$routeParams","$timeout","navi","Scorm",function(e,t,n,a,r,o){function i(){if($(".desktop-break-test:hidden").length)return void $(".stage-wrap, .stage>.page").removeAttr("style");var e=$(document).height(),n=$(t).height(),a=$(".wrap>header").height()+$(".wrap>footer").height(),r=Math.max(n,e)-a-$(".stage>.dr-audio-bar").height();$(".stage>.page").css({height:r+"px","max-height":r+"px"}),$(".stage-wrap").css({height:Math.max(n,e)-a+"px"})}e.resourceId="resources",e.nav=r,e.moduleTitle=r.getData().settings.title,e.moduleSettings=r.getData().settings;var s;(s=t.navigator.userAgent.match(/msie|trident|firefox/gi))&&angular.element("html").addClass(s[0].toLowerCase()),e.$root.$on("$routeChangeSuccess",function(t){e.$root.pageId=e.pageId=n.id,e.viewUpdating=!1,e.pageData=r.getSettings(e.pageId),e.pageData&&(e.groupData=r.getGroupData(e.pageData.group),e.subgroupData=e.pageData.sub?e.groupData.subgroups[e.pageData.sub]:e.groupData),o.setLessonLocation(e.pageId),angular.element(".stage").focus()}),e.$root.getPageData=r.getPageData,e.openDialog=function(t){e.dialogId=t},e.closeDialog=function(){e.dialogId=null},e.exitModule=function(){confirm("Save and exit the module?")&&($(t).off("onbeforeunload.dibpApp"),e.doExit())},e.saveLessonData=function(){o.isAvailable()&&o.setLessonData(escape(angular.toJson(r.getSuspendData())))},e.doExit=function(){o.isAvailable()&&(r.progress()>=1&&o.setLessonStatus("completed"),e.saveLessonData(),o.end()),t.top.opener&&t.top.close()},$(t).one("onbeforeunload",function(n){t.confirm("exit module?"),e.doExit()});$(".scroll-down").hide(),$("body").on("click.nds.scroll",function(e){$(".scroll-down.active").length&&document.body.scrollHeight<=$(window).height()&&$(".scroll-down").removeClass("active").fadeOut(800)}),e.updateDialogFocus=function(){a(function(){angular.element("#dialog-container .dialog").attr("tabIndex",0).focus()},500)},function(){var e=angular.noop;$(t).on("resize",function(){a.cancel(e),e=a(i,200)})}(),function(){var t=e.$watch(function(){return i(),!0});a(t,5e3)}()}]),angular.module("ScormApi",[]).service("Scorm",function(){function e(t){if(v++,v>=255)return null;if(t.API||t.API_1484_11)return t.API||t.API_1484_11;if(t.frames.length>0)for(var n=0;n<t.frames.length;n++){var a=t.frames[n].API||t.frames[n].API_1484_11;if(a&&t!=t.opener)return t.frames[n].API||t.frames[n].API_1484_11}return t.parent&&t.parent!=t?e(t.parent):t.opener&&!t.opener.closed?e(t.opener):void 0}function t(){return i}function n(e){if(t()){if(12==c){var n=(new Date).getTime();return o(n-e)}var a=(new Date).getTime();return e=parseInt((a-e)/1e3,10),"PT"+e+"S"}}function a(e){if(t()){var n=12==c?i.LMSGetLastError():i.GetLastError();if("undefined"==typeof n)return!1;var a=12==c?i.LMSGetErrorString(n):i.GetErrorString(n);return"403"==n&&2004==c?!0:"0"!=n?(d&&console.error(e+". "+messages[0]+" "+n+": "+a),!1):!0}}function r(){t()&&(12==c?i.LMSFinish(""):i.Terminate(""),a(),i=null)}function o(e){var t=e/1e3,n=0,a=0;return a=parseInt(t/3600,10),t-=3600*a,n=parseInt(t/60,10),t=parseInt(t-60*n,10),10>a&&(a="0"+a),10>n&&(n="0"+n),10>t&&(t="0"+t),g&&console.log("Elapsed time: "+a+":"+n+":"+t),a+":"+n+":"+t}var i,s,c,l,u,d,p,g=!0,f=!1,m=0,v=0,h=!1;return{start:function(n,a,o,v,b,C){if(f&&r(),c=n||12,d=a||!1,l=o||"",u=v||!1,s=b||"suspend",p=C||0,i=e(window),!t())return g&&console.log(l),["",""];h=!0,m=(new Date).getTime(),12==c?i.LMSInitialize(""):i.Initialize("");var $=this.getValue(12==c?"cmi.core.student_name":"cmi.learner_name"),y=this.getValue(12==c?"cmi.core.student_id":"cmi.learner_id");if(12==c){var A=this.getValue("cmi.core.lesson_status");"passed"!=A&&this.setValue("cmi.core.lesson_status","incomplete")}else if(2004==c){var P=this.getValue("cmi.completion_status");"completed"!=P&&this.setValue("cmi.completion_status","incomplete")}return[$,y]},end:function(){if(f&&r(),t()){f=!0;{var e=n(m);this.getValue(12==c?"cmi.core.lesson_status":"cmi.completion_status")}this.setValue(12==c?"cmi.core.session_time":"cmi.session_time",e),this.setValue(12==c?"cmi.core.exit":"cmi.exit",s)}r()},getValue:function(e){if(t()){g&&console.log("Get value: "+e);var n=12==c?i.LMSGetValue(e):i.GetValue(e);return a(1),n}},setValue:function(e,n){t()&&(g&&console.log("Set value: elem="+e+" value="+n),12==c?(i.LMSSetValue(e,n),a(),i.LMSCommit(""),a(2)):(i.SetValue(e,n),a(),i.Commit(""),a(2)))},saveScore:function(e){if(t()){g&&console.log("Score: "+e);var n,a=parseInt(e,10);isNaN(a)?(n="0",a="0"):(a=a>100?100:a,a=0>a?0:a,n=a/100),12==c?this.setValue("cmi.core.score.raw",a):(this.setValue("cmi.score.raw",a),this.setValue("cmi.score.scaled",n)),a>=p?this.setValue(12==c?"cmi.core.lesson_status":"cmi.success_status","passed"):this.setValue(12==c?"cmi.core.lesson_status":"cmi.success_status","failed")}},setLessonStatus:function(e){this.lessonStatus!==e&&(this.lessonStatus=e,this.setValue(12===c?"cmi.core.lesson_status":"cmi.completion_status",e))},isAvailable:function(){return h},getLessonData:function(){return this.getValue("cmi.suspend_data")},setLessonData:function(e){return this.setValue("cmi.suspend_data",e)},setLessonLocation:function(e){this.setValue("cmi.core.lesson_location",e)},getLessonLocation:function(){return this.getValue("cmi.core.lesson_location")}}}),angular.module(APP_NAME).directive("page",function(){return{template:'<div class="container-fluid"><div class="page-wrap"><img ng-if="bgImg" ng-src="{{bgImg}}" alt="{{alt}}" class="bg-img img-fill"><div class="page-body" ng-transclude></div></div></div>',restrict:"EC",transclude:!0,replace:!0,scope:{bgImg:"@",alt:"@"},link:function(e,t,n){}}}),angular.module(APP_NAME).controller("PageCtrl",["$scope","$injector","$controller",function(e,t,n){e.pageData=e.nav.getSettings(e.pageId),e.onCuePoint=function(t){e.pageData[t.data]=!0},e.pageData&&t.has("CtrlPage"+e.pageData.id)&&n(t.get("CtrlPage"+e.pageData.id),{$scope:e})}]),angular.module(APP_NAME).controller("MenuCtrl",["$scope","$injector","$controller","$timeout",function(e,t,n,a){e.topicState=[],e.menuItems=e.nav.getGroups(),angular.forEach(e.menuItems,function(t,n){t.src="menuPics_"+t.id+".jpg",t.state=e.nav.isGroupComplete(t.id)===e.nav.state.COMPLETED,t.active=n>0?e.menuItems[n-1].state:!0})}]),angular.module(APP_NAME).controller("ResourceCtrl",["$scope","$injector","$controller",function(e,t,n){e.resourceId=null,e.openResource=function(t){e.resourceId="/resource/"+t,e.lastResource=t,angular.element("#resource-wrap").focus()}}]),angular.module(APP_NAME).controller("TopicMenuCtrl",["$scope","$injector","$controller",function(e,t,n){function a(e){r.updateSubgroupStates(e)}var r=t.get("navi");e.isOpen=!1,e.toggleMenu=function(){e.isOpen=!e.isOpen,e.isOpen&&a(e.pageData.group)}}]),angular.module(APP_NAME).directive("drAudio",["$window","$timeout",function(e,t){var n=[],a=0,r={register:function(e){n.push(e)},deregister:function(e){for(var t=n.length-1;t>=0;t--){var a=n[t];if(a.id===e.id){n.splice(t,1);break}}},pauseOthers:function(e){for(var t=n.length-1;t>=0;t--){var a=n[t];e&&a.id===e.id||a.pause()}}};return e.ndsAudioManager={pauseAll:r.pauseOthers},{template:'<div> <span class="progbar" style="display:none;"><span class="ct"></span></span> <span style="display:none;">{{currentTime}}</span> <button type="button" title="Play and pause" class="btn play" ng-class="{active: isPlaying}" ng-click="togglePlay()"><span ng-hide="waiting" class="no-anim"><i class="glyphicon glyphicon-play off"></i><i class="glyphicon glyphicon-pause on"></i></span><img ng-show="waiting" src="assets/ui/ajax-loader.gif" alt="loading"><span class="lbl off">Play</span><span class="lbl on">Pause</span></button> <button type="button" title="Replay" dr-disable="!isPlaying" class="btn replay" ng-class="{active: isPlaying}" ng-click="replay()"><i class="glyphicon glyphicon-repeat"></i><span class="lbl">Replay</span></button> <button ng-show="subs" type="button" aria-controls="" title="Toggle transcript"  class="btn trans no-anim" ng-click="toggleTranscript()" aria-controls="{{captionTargetId}}"><i class="glyphicon glyphicon-comment off"></i><i class="glyphicon glyphicon-comment on"></i><span class="lbl">Transcript</span></button> </div>',restrict:"C",replace:!0,scope:{src:"@src",onfirstplay:"&",onComplete:"&",onend:"&",onstop:"&",transcript:"@",toggle:"=",cuepoints:"=?",oncuepoint:"="},priority:0,compile:function(n,o){return function(n,o,i){function s(){n.$root.safeApply()}function c(){e.mejs&&e.mejs.players&&angular.forEach(e.mejs.players,function(e){e instanceof mejs.MediaElementPlayer&&e.pause()})}var l,u=!1,d=!1,p=[];n.isPlaying=!1,n.waiting=!0,n.subs=!1;var g=o.find(".progbar>.ct");g.parent().on("click",function(e){var t=e.offsetX/e.currentTarget.offsetWidth*f.duration;f.currentTime=t,console.log(t)}),t(function(){void 0!==n.transcript&&(n.subs=!0,l=angular.element(n.transcript),l.hide(),n.captionTargetId=l.attr("id"),angular.isDefined(n.toggle)&&n.$watch("toggle",function(e,t){e!=t&&n.toggleTranscript()}))});var f=new Audio;f.id="draudiocomact"+a++,f.src=n.src,r.register(f),n.$on("$destroy",function(){f.pause(),r.deregister(f),f=null}),n.togglePlay=function(){f.paused||f.ended?(f.play(),r.pauseOthers(f),c()):f.pause()},n.replay=function(){f.currentTime>0&&(f.currentTime=0,(f.paued||f.ended)&&f.play())},n.toggleTranscript=function(){l.slideToggle()},o.find("button.trans").one("click",function(){for(n.onfirstplay&&!d&&n.onfirstplay(),n.onComplete&&n.onComplete();p.length;)n.$parent.$eval(p.shift().data);s()}),$(f).one("canplay oncanplay",function(e){n.waiting=!1,u=!0,n.duration=this.duration;var t=$(this);t.on("play playing ",function(){n.isPlaying=!0,n.onfirstplay&&!d&&(d=!0,n.onfirstplay()),s()}).on("pause ended",function(){n.isPlaying=!1,s()}).on("waiting play playing error",function(e){n.waiting=null===e.type.match(/play/gi),s()}).on("timeupdate",function(){n.currentTime=Math.round(this.currentTime),g.width(Math.round(this.currentTime/this.duration*100)+"%"),s()}).one("ended",function(){n.onComplete&&(n.onComplete(),s())}),n.cuepoints&&(p=n.cuepoints.concat(),$(f).on("timeupdate.cuepoints",function(){p.length&&p[0].t<=this.currentTime&&(n.$parent.$eval(p.shift().data),p.length||$(this).off("timeupdate.cuepoints"))})),n.$on("$destroy",function(){t.off("play pause ended waiting playing error canplay oncanplay"),t=null}),n.$root.safeApply()}),e.navigator.userAgent.match(/(iphone|ipad)/i)&&$(f).trigger("canplay")}}}}]),angular.module(APP_NAME).directive("drClickRevealManager",function(){return{restrict:"C",transclude:!0,template:"<ul ng-transclude></ul>",replace:!0,scope:{oncomplete:"&"},controller:["$scope",function(e){function t(e){a++,e.one("click",function(e){r++,n()})}function n(){r>=a&&e.$apply(e.oncomplete())}var a=0,r=0;return e.oncomplete=e.oncomplete||angular.noop,{addItem:t}}],link:function(e,t,n){}}}).directive("drClickReveal",function(){return{template:'<div class="desc" ng-transclude></div>',restrict:"C",transclude:!0,require:"^drClickRevealManager",scope:{onClick:"&"},link:function(e,t,n,a){e.onClick=e.onClick||angular.noop,a.addItem(t),t.one("click",function(n){t.addClass("done"),t.find(".ans").addClass("animated fadeInUp faster"),e.onClick()}).click(function(e){e.preventDefault()})}}}),angular.module(APP_NAME).directive("drMcq",["$timeout","$compile",function(e,t){var n=function(){var e=0;return function(){return"drmop"+e++}}(),a=1,r=2;return{restrict:"C",scope:!0,compile:function(o,i){return o.wrapInner('<form action="" aria-label="{{ariaLabel}}" />'),o.find(".showCa").attr("ng-bind-html","correctOptions"),function(o,i,s){function c(){i.find("[data-checked=true]").attr(C,"false").data(C,!1)}function l(e){o.isWa=o.isCa=!1,o.correctCount=0,o.disabled=!1;var t=$(e);if(p=t.parent(".dr-mcq-option"),w===a)c(),p.data(C,!0).attr(C,"true");else{var n=p.data(C);p.data(C,!n).attr(C,!n),o.selectedCount=i.find(A).length,o.disabled=0===o.selectedCount}o.safeApply()}function u(){if(o.selectedOp=w===a?p.data("index"):i.find('[data-checked="true"]').map(function(){return $(this).data("index")}),o.attempt++,D)return o.isWa=!(o.isCa=o.$eval(D)),void o.safeApply();o.isWa=!1;for(var e=b.length-1;e>=0;e--)if(k.eq([b[e]-1]).data(C)!==!0)o.isWa=!0;else if(o.correctCount++,w===a){o.isWa=!1;break}o.isCa=!o.isWa,o.weighting=p.attr("data-weighting")||0}function d(){for(var e=b.length-1;e>=0;e--)k.eq([b[e]-1]).addClass("co")}var p,g,f=s.options||"li",m=!i.hasClass("no-bullet"),v=n(),h=s.maxAttempts||1,b=o.$eval(s.ca)||o.pageData.ca||1,C="data-checked",y=".dr-mcq-option",A="input[name="+v+"]:checked",P=".btn-eval",k=i.find(f),D=s.evalFn||null,w="mc"===s.questionType?1:b.length>1?r:a;o.ariaLabel=s.ariaLabel||"Multiple Choice Question",o.attempt=0,o.isWa=!1,o.isCa=!1,o.disabled=!0,o.selectedCount=0,o.correctOptions="",angular.isObject(b)||(b=[b]),t(i.find(".btn-eval").removeAttr("ng-disabled").removeAttr("data-ng-disabled").addClass("ng-class:{disabled: disabled}").attr({type:"submit","aria-disabled":"{{disabled}}"})[0])(o);for(var M=[],I=0;I<b.length;I++)M.push(String.fromCharCode(96+b[I]));o.correctOptions="The correct "+(b.length>1?"answers are":"answer is")+": <strong>"+M.join("</strong>,&nbsp;<strong>")+"</strong>.",g=w===r?"checkbox":"radio",k.each(function(e,n){var a=$(this);a.attr({id:v+e,name:v,bullet:m?String.fromCharCode(97+e)+".":"",type:g}).addClass("dr-mcq-option"),t(a[0])(o)}),o.isSelected=function(e){return k.eq(e).data(C)},e(function(){var e={};e[C]=!1,k=i.find(y),k.each(function(t,n){$(n).data("index",t+1).data(C,!1).attr(e)}),i.find("input").on("change.drMcq",function(e){l(e.currentTarget)}),i.find(P).click(function(e){e.preventDefault(),o.disabled||(o.attempt<h&&u(),(o.attempt>=h||o.isCa)&&(o.disabled=!0,o.intComplete=!0,i.addClass("completed"),i.find("input").off(".drMcq").on("click.drMcq",function(e){e.preventDefault()}),d(),s.oncomplete&&o.$eval(s.oncomplete)),o.safeApply())})},500)}}}}]),angular.module(APP_NAME).directive("drFocusTarget",function(){return{restrict:"A",scope:{drFocusTarget:"@"},link:function(e,t,n){t.click(function(t){return t.preventDefault(),$(e.drFocusTarget).focus(),!1})}}}),angular.module("navigationModule",[]).service("navi",["screenData",function(e){function t(){function e(t){if(t<o.screens.length){var n,a,r={state:s},i=angular.extend(r,o.screens[t]);i.hasOwnProperty("next")||(t+1<o.screens.length?(n=o.screens[t+1],i.next=n.id):i.next=null),i.hasOwnProperty("prev")||(t-1>=0?(a=o.screens[t-1],i.prev=a.id):i.prev=null),o.screens[t]=i,e(++t)}}e(0),a={screens:{},groups:{}};for(var t=o.groups.length-1;t>=0;t--){var r=o.groups[t];a.groups[o.groups[t].id]=r,r.state=c;var i=o.screens.filter(function(e){return e.group===r.id});if(r.totalPages=i.length,r.subgroups)for(var l=r.subgroups.length-1;l>=0;l--){var u=r.subgroups[l];u.id="_"+u.id,r.subgroups[u.id]=u}angular.forEach(i,function(e,t){e.pageNumber=t+1})}for(t=0;t<o.screens.length;t++){var d=o.screens[t];if(a.screens[d.id]=d,d.sub){d.sub="_"+d.sub;var u=a.groups[d.group].subgroups[d.sub];u.screens||(u.screens=[],u.screenIds=[]),u.screens.push(d),u.screenIds.push(d.id),u.totalPages=u.screens.length,u.state=c,u.active=!1,d.pageNumber=u.totalPages}}n()}function n(){for(var e=o.groups.length-1;e>=0;e--){var t=o.groups[e];t.state=r.isGroupComplete(t.id)}}var a,r={},o=e,i=4,s=0,c=2,l={};return r={state:{NOT_STARTED:s,INCOMPLETE:c,COMPLETED:i},updateSubgroupStates:function(e){for(var t=a.groups[e],n=t.subgroups,o=n.length-1;o>=0;o--)n[o].screenIds&&(n[o].active=o?r.checkCompletion(n[o-1].screenIds):!0,n[o].state=n[o].active?i:c)},init:function(e){var n=e?e.screenData:null;if(n&&n.length===o.screens.length){for(var a=0;a<n.length;a++)o.screens[a].state=parseInt(n[a],10);l=e.miscData}t()},getScreens:function(){return o.screens},getSettings:function(e){return a.screens[e]&&(a.screens[e].state=i),a.screens[e]},getGroupData:function(e){return a.groups[e]||{}},setIncomplete:function(e){a.screens[e]?a.screens[e].state=c:console.warn("Navi:setIncomplete - ID ",e,"not found")},setComplete:function(e){a.screens[e]?(a.screens[e].state=i,a.screens[e].group&&r.isGroupComplete(a.screens[e].group)):console.warn("Navi:setComplete - ID ",e,"not found")},checkCompletion:function(e){var t=!0;e=angular.isString(e)?[e]:e;for(var n=e.length-1;n>=0;n--){var r=a.screens[e[n]];if(r.state!==i||r.showNext===!1){t=!1;break}}return t},progress:function(){var e=0;return e=o.screens.reduce(function(e,t){return t.state===i?++e:e},0),e/o.screens.length},isSubgroupComplete:function(e,t){{var n=!1;a.groups[e].subgroupScreens}return n},isGroupComplete:function(e){var t=!1;if(a.groups[e]&&a.groups[e].state===i)t=i;else{for(var n=0,r=0,l=o.screens.length-1;l>=0;l--){var u=o.screens[l];u.group===e&&(n++,u.state===i&&r++)}a.groups[e].state=n===r?i:n>0?c:s,t=a.groups[e].state}return t},isAllComplete:function(){for(var e=!0,t=o.screens.length-1;t>=0;t--){var n=o.screens[t];if(n.state!==i){e=!1;break}}return e},getData:function(){return angular.copy(o)},getSuspendData:function(){for(var e=[],t=0;t<o.screens.length;t++)e.push(o.screens[t].state);return e={screenData:e,miscData:l}},getGroups:function(){return angular.copy(o.groups)},miscData:function(){return l}}}]),angular.module(APP_NAME).directive("drTabs",["$compile",function(e){return{restrict:"AC",scope:!0,compile:function(e,t){var n,a=t.tabs,r=(t.panels,[]);return e.attr("role","tablist"),e.find(a+"[data-target]").each(function(t,a){var o=$(this),i=o.attr("data-target"),s=e.find("#"+i);n=r.push(!1)-1,s.attr({tabIndex:0,role:"tabpanel","ng-show":"states["+n+"]","aria-expanded":"{{states["+n+"]}}"}),o.attr({role:"tab","aria-selected":"{{states["+n+"]}}","aria-controls":i})}),function(e,t,n){var o=e.$eval(n.closeOthers),i=n.onComplete?function(){e.$eval(n.onComplete)}:angular.noop,s=0;e.states=r,t.find(a+"[data-target]").each(function(n,a){var c=$(this),l=c.attr("data-target"),u=(t.find("#"+l),n);o&&c.on("click.drTabs",function(){$(r).each(function(e){r[e]=!1})}),c.one("click.drTabs",function(){++s>=r.length&&i()}).on("click.drTabs",function(t){t.preventDefault(),r[u]=!r[u],e.safeApply()})}),e.$on("$destroy",function(){t.find(a+"[data-target]").off("click.drTabs")})}}}}]),angular.module(APP_NAME).directive("drClickCounter",function(){return{restrict:"AC",link:function(e,t,n){var a;e.pageData.drClickCounter=e.pageData.drClickCounter||[],a=e.pageData.drClickCounter,t.find(n.drClickCounter).each(function(t){void 0===a[t]&&(a[t]=0),$(this).data("drClickCounter-clicked",0).data("drClickCounter-index",t).one("click.drClickCounter",function(){a[$(this).data("drClickCounter-clicked",1).data("drClickCounter-index")]=1,a.indexOf(0)<0&&e.$apply(function(){e.$eval(n.onAllClicked)})})}),e.$on("$destroy",function(){$(n.drClickCounter).off(".drClickCounter")})}}}),angular.module(APP_NAME).directive("drAudioBar",["$http","$templateCache","$compile",function(e,t,n){var a=function(){var e=0;return function(){return"draudbar"+e++}}();return{templateUrl:"scripts/directives/templates/drAudioBar.html",restrict:"C",replace:!1,transclude:!0,scope:!0,compile:function(e,t,r){return function(e,t,o){e.transToggle=!1,e.transId=a(),r(e,function(a){e.hasAudio=!1,angular.forEach(a,function(a){if(angular.isObject(a)&&1==a.nodeType){var r=a.className.match(/(?=tpl-).[\w-]+(?=\b)/gi);switch(r=r?r[0]:null){case"tpl-transcript":t.find("."+r).removeClass(r),r="trans-body";case"tpl-prompt":t.find("."+r).removeClass(r).html(a.innerHTML);break;case"tpl-audio":angular.element(a).addClass("dr-audio").removeClass(r).attr({transcript:".{{transId}}",toggle:"transToggle"}),e.hasAudio=!0,t.find("."+r).removeClass(r).append(n(a)(e))}}})})}}}}]),angular.module(APP_NAME).directive("drMcqOption",function(){return{templateUrl:"scripts/directives/templates/drMcqOption.html",restrict:"C",replace:!0,transclude:!0,scope:{id:"@",name:"@",bullet:"@",type:"@"},link:function(e,t,n){e.type=e.type||"checkbox",e.bullet+=" ",t.removeAttr("id").removeAttr("name").removeAttr("bullet"),t.find("input").on("focus.drMcqOption blur.drMcqOption",function(t){e.$apply(function(){e.hasFocus="focus"===t.type})})}}}),angular.module(APP_NAME).directive("drDisable",["$compile",function(e){return{restrict:"CA",priority:5e3,scope:{disabled:"=drDisable"},compile:function(t,n){n.$set("aria-disabled","{{disabled}}"),n.$set("ng-click","onClicked($event)"),n.$set("ng-class","{disabled: disabled}");var a=e(t,null,5e3);return function(e,t,n){a(e),e.tt=!1,e.onClicked=function(t){e.disabled&&t.preventDefault()}}}}}]),angular.module(APP_NAME).directive("drNextPrompt",function(){return{template:'<div ng-show="active">Select Next to continue.</div>',restrict:"CA",replace:!0,scope:!0,link:function(e,t,n){e.active=!1;var a=e.$parent.$watch("pageData.completed",function(t){t&&(e.active=!0)});e.$on("$destroy",a)}}});